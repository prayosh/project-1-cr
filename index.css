/* Basic Reset */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-dark: #0d1117; /* Very dark background */
            --bg-card: #161b22; /* Slightly lighter for cards */
            --text-light: #c9d1d9; /* Light grey text */
            --text-secondary: #8b949e; /* Muted text */
            --accent-blue: #58a6ff; /* Primary accent color */
            --accent-green: #3fb950; /* Success/add button */
            --accent-orange: #f0883e; /* Warning/countdown */
            --border-color: #30363d;
            --border-radius: 8px;
            --shadow-light: rgba(0, 0, 0, 0.2);
            --shadow-strong: rgba(0, 0, 0, 0.4);
            --countdown-bg: #1f2a38; /* Background for countdown items */
            --countdown-border: #445566; /* Border for countdown items */
            --input-bg: #1a202c; /* Distinct dark background for input fields */
            --input-icon-color: var(--text-secondary); /* Default icon color */
            --input-icon-focus-color: var(--accent-blue); /* Icon color on focus */
            --button-bg-secondary: #4a515c; /* Secondary button background */
            --fab-bg: #58a6ff; /* FAB background, e.g., accent blue */
            --fab-icon-color: var(--bg-dark); /* FAB icon color, dark for contrast */
            --edit-button-bg: #f0883e; /* Orange for edit actions */
            --delete-button-bg: #dc3545; /* Red for delete actions */
            --delete-button-hover-bg: #c82333; /* Darker red on hover */
            --menu-sidebar-width: 250px; /* Width of the sliding menu */
            --table-header-bg: #1f262f; /* Darker header for Excel-like table */
            --table-row-odd: #1e242c; /* Slightly lighter for odd rows */
            --table-row-even: #181d24; /* Slightly darker for even rows */
            --freelancing-row-bg: #1a2332; /* Specific color for freelancing rows in combined history */
            --selling-row-bg: #231a32; /* Specific color for selling rows in combined history */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top on larger screens */
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        #root {
            background-color: var(--bg-dark); /* Root itself can be bg-dark to seamlessly fit full screen */
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative; /* For sticky footer */
        }

        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 10vh;
            width: 100%;
            max-width: 800px; /* Optional: Constrain overall width on very large screens for better readability */
            margin: 0 auto; /* Center the app container if max-width is set */
            background-color: var(--bg-card); /* Main app content background */
            box-shadow: 0 0 20px var(--shadow-strong);
        }

        .app-header {
            padding: 24px 16px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-card);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .app-title {
            font-family: 'Marhey', cursive; /* New cursive font */
            font-size: clamp(1.8rem, 5vw, 2.8rem); /* Responsive font size */
            margin-bottom: 8px;
            color: var(--accent-blue);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .current-date {
            font-size: clamp(1rem, 3.5vw, 1.2rem); /* Increased font size */
            color: var(--text-secondary);
        }

        .main-content {
            flex-grow: 1;
            padding: 24px 16px;
            padding-bottom: 150px; /* Added padding to ensure space for FABs and menu */
            display: flex;
            flex-direction: column;
            gap: 24px;
            overflow-y: auto; /* Enable scrolling for content if needed */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        .tab-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
            height: 100%;
        }

        .progress-section {
            background-color: var(--bg-dark);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .progress-section h3 {
            margin-bottom: 15px;
            color: var(--text-light); /* Changed to light text for better contrast */
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            font-weight: 600;
        }

        .progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: 5px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #64b5f6, var(--accent-blue)); /* Gradient blue */
            border-radius: 5px;
            width: 0%;
            transition: width 0.7s ease-out; /* Slower, smoother transition */
            box-shadow: 0 0 8px rgba(88, 166, 255, 0.5); /* Subtle glow */
        }

        .progress-text {
            font-size: clamp(0.9rem, 2.5vw, 1.05rem);
            color: var(--text-secondary);
            text-align: center;
            display: flex;
            flex-direction: column; /* Changed to column for two lines */
            justify-content: center;
            flex-wrap: wrap;
            gap: 4px;
        }

        .progress-text .percentage-value {
            color: var(--accent-blue);
            font-weight: 500;
        }
        
        /* New styles for target amount on second line */
        .progress-text .current-amount {
            color: var(--text-light);
            font-weight: 500;
        }
        .progress-text .target-amount-line {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
        }
        .progress-text .target-amount {
            color: var(--accent-green); /* Different color for target */
            font-weight: 500;
        }


        .input-card {
            background-color: var(--bg-dark);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px var(--shadow-light);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .input-card label.sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .input-row {
            display: flex;
            gap: 10px; /* Space between input fields */
            flex-wrap: wrap; /* Allow wrapping on small screens */
            align-items: center;
        }
        .input-field-group { /* For dropdowns and textarea */
            flex: 1; /* Allow to grow */
            min-width: 150px;
            display: flex;
            flex-direction: column; /* Stack label and input if needed */
            gap: 5px;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            border: 1px solid var(--border-color); /* Border now on wrapper */
            border-radius: var(--border-radius);
            background-color: var(--input-bg);
            transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease; /* Animation on focus */
            flex: 1; /* Allow input wrapper to grow */
            min-width: 150px; /* Minimum width to prevent shrinking too much */
        }

        .input-wrapper:focus-within {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.4), 0 0 10px rgba(88, 166, 255, 0.2);
            transform: translateY(-1px); /* Subtle lift on focus */
        }

        .input-wrapper .currency-icon {
            position: absolute;
            left: 15px; /* Adjust as needed */
            color: var(--input-icon-color);
            font-size: 1.15em; /* Slightly larger */
            transition: color 0.2s ease;
            pointer-events: none; /* Allows clicks to pass through to the input */
            line-height: 1; /* Align vertically */
        }

        .input-wrapper:focus-within .currency-icon {
            color: var(--input-icon-focus-color);
        }

        .input-card input[type="number"],
        .input-card input[type="date"],
        .input-card .dropdown-select,
        .input-card .note-textarea {
            flex-grow: 1;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            border: none; /* No border on the input itself */
            background: transparent; /* Transparent background to show wrapper bg */
            color: var(--text-light);
            font-size: 1em;
            outline: none; /* No default outline */
        }
        
        .input-card input[type="number"] {
            padding-left: 40px; /* Adjust left padding for icon */
        }

        .input-card input[type="number"]::placeholder,
        .input-card input[type="date"]::placeholder,
        .input-card .note-textarea::placeholder {
            color: var(--text-secondary);
        }
        
        /* Specific styles for date input */
        .input-wrapper.date-input {
            flex: 0 1 180px; /* Fixed width for date input, but allow it to shrink */
        }
        .input-card input[type="date"] {
            width: 100%; /* Make date input fill its wrapper */
            -webkit-appearance: none; /* Remove default styling */
            appearance: none;
        }
        /* Style for date picker icon */
        .input-card input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(70%); /* Make icon visible on dark background */
            cursor: pointer;
            padding-right: 5px;
        }
        .input-card input[type="date"]::-moz-calendar-picker-indicator {
             filter: invert(70%); /* Make icon visible on dark background */
            cursor: pointer;
            padding-right: 5px;
        }

        /* Dropdown specific styles */
        .dropdown-select {
            -webkit-appearance: none; /* Remove default arrow */
            -moz-appearance: none;
            appearance: none;
            padding: 12px 15px;
            color: var(--text-light);
            font-size: 1em;
            cursor: pointer;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23c9d1d9" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center; /* Adjusted for input-wrapper */
            padding-right: 35px; /* Make space for custom arrow */
        }
        /* Focus state is now handled by .input-wrapper:focus-within */
        /* .dropdown-select:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.4);
            outline: none;
        } */

        .dropdown-select:invalid {
            color: var(--text-secondary);
        }

        .dropdown-select option {
            color: var(--text-light);
            background-color: var(--bg-dark);
        }

        /* Textarea specific styles */
        .note-textarea {
            padding: 12px 15px;
            color: var(--text-light);
            font-size: 1em;
            resize: vertical; /* Allow vertical resizing */
            min-height: 80px;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
        }
        /* Focus state is now handled by .input-wrapper:focus-within */
        /* .note-textarea:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.4);
            outline: none;
        } */


        .input-card button {
            padding: 12px 20px;
            border-radius: var(--border-radius); /* Consistent border-radius */
            border: none;
            background-color: var(--accent-green);
            color: var(--bg-dark); /* Dark text for contrast on green button */
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease; /* Include box-shadow in transition */
            box-shadow: 0 4px 12px rgba(63, 185, 80, 0.1); /* Subtle initial shadow */
        }

        .input-card button:hover {
            background-color: #4ac25d;
            transform: translateY(-2px); /* Slightly more pronounced lift */
            box-shadow: 0 6px 16px rgba(63, 185, 80, 0.3); /* Stronger green shadow on hover */
        }

        .input-card button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(63, 185, 80, 0.2); /* Reduced shadow on active */
        }

        /* --- Floating Action Buttons (FABs) --- */
        .fab-button {
            position: fixed; /* Changed from absolute to fixed */
            bottom: 75px; /* Distance from bottom, above tab bar */
            right: 20px; /* Distance from right */
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--fab-bg);
            color: var(--fab-icon-color);
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 12px var(--shadow-strong);
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            z-index: 15; /* Above other content, below modals */
        }

        .fab-button.history-home-fab { /* Specific positioning for history screen home button */
            bottom: 20px;
            right: 20px;
            z-index: 1001; /* Above history screen content */
        }

        .fab-button svg {
            width: 28px;
            height: 28px;
            color: var(--fab-icon-color); /* Icon color */
            transition: color 0.2s ease;
        }

        .fab-button:hover {
            background-color: #64b5f6; /* Slightly lighter blue on hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 16px var(--shadow-strong);
        }

        .fab-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px var(--shadow-strong);
        }

        .fab-button:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 3px;
        }

        /* --- Home/Tab Menu Sidebar Overlay --- */
        .home-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: var(--menu-sidebar-width);
            background-color: var(--bg-card);
            border-right: 1px solid var(--border-color);
            box-shadow: 2px 0 10px var(--shadow-strong);
            transform: translateX(-100%); /* Start off-screen */
            transition: transform 0.3s ease-out;
            z-index: 100;
            padding-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .home-menu-overlay.open {
            transform: translateX(0); /* Slide in */
        }

        .menu-header {
            padding: 10px 20px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: var(--accent-blue);
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
        }

        .home-menu-overlay button {
            background: none;
            border: none;
            color: var(--text-light);
            padding: 15px 20px;
            text-align: left;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease;
            width: 100%;
            white-space: nowrap; /* Prevent text wrap */
        }

        .home-menu-overlay button:hover {
            background-color: #2a313c;
            color: var(--accent-blue);
        }

        .home-menu-overlay button:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: -2px; /* Inset outline */
        }

        /* Overlay for when sidebar is open */
        .sidebar-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Darken background */
            z-index: 99; /* Below sidebar, above main content */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
        }

        .sidebar-backdrop.open {
            opacity: 1;
            visibility: visible;
        }

        .countdown-card {
            background-color: var(--bg-dark);
            padding: 25px 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px var(--shadow-light);
            border: 1px solid var(--border-color);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .countdown-card h2 {
            font-size: clamp(1.2rem, 3.5vw, 1.6rem);
            color: var(--text-light);
            margin-bottom: 15px; /* Increased margin for better separation */
        }

        /* Calendar-type countdown styling */
        .countdown-grid {
            display: flex;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
            justify-content: center;
            gap: 12px; /* Space between countdown items */
            width: 100%; /* Ensure it uses available width */
        }

        .countdown-item {
            background-color: var(--countdown-bg);
            border: 1px solid var(--countdown-border);
            border-radius: var(--border-radius);
            padding: 10px 15px;
            min-width: 80px; /* Minimum width for each item */
            flex: 1 1 calc(25% - 12px); /* Distribute items, 4 per row, adjust for gap */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px var(--shadow-light);
        }

        .countdown-item:last-child {
            margin-right: 0;
        }

        /* Keyframe animation for countdown digits */
        @keyframes digit-pop-animation { /* Renamed to avoid conflict with existing 'digit-pop' if any, and make it more specific */
            0% {
                transform: scale(0.8);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        .countdown-value.digit-pop-animation {
            animation: digit-pop-animation 0.3s ease-out; 
        }

        .countdown-value {
            font-family: 'Roboto Mono', monospace;
            font-size: clamp(1.6rem, 5vw, 2.5rem);
            font-weight: 700;
            color: var(--accent-orange);
            line-height: 1; /* Adjust line height to prevent extra space */
            margin-bottom: 5px;
        }

        /* Distinct color for Days countdown value */
        .countdown-value.days-value-color {
            color: var(--accent-green); /* Or any other distinct color */
        }


        .countdown-timer { /* Fallback for "Goal date passed!" */
            font-family: 'Roboto Mono', monospace;
            font-size: clamp(1.4rem, 4.5vw, 2.2rem);
            font-weight: 700;
            color: var(--accent-orange);
            letter-spacing: -0.5px;
        }

        .tab-bar {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid var(--border-color);
            background-color: var(--bg-card);
            padding: 10px 0;
            position: sticky;
            bottom: 0;
            width: 100%;
            z-index: 10;
        }

        .tab-button {
            flex: 1;
            padding: 12px 8px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: clamp(0.9rem, 2.8vw, 1.05rem);
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-bottom 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-align: center;
        }

        .tab-button svg {
            height: 24px;
            width: 24px;
            color: var(--text-secondary);
        }

        .tab-button:hover:not(.active) {
            background-color: #2a313c;
            color: var(--text-light);
        }

        .tab-button.active {
            color: var(--accent-blue);
            background-color: #2a313c;
            border-bottom: 3px solid var(--accent-blue);
            font-weight: 600;
        }

        .tab-button.active svg {
            color: var(--accent-blue);
        }

        /* Accessibility: Focus styles */
        .tab-button:focus,
        .input-card button:focus,
        .modal-close-button:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }
        /* Explicitly define focus for the input wrapper */
        .input-wrapper:focus-within {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }


        /* Modal Styles (for confirmation and option management) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px); /* Subtle blur effect */
        }

        .modal-content {
            background-color: var(--bg-card);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 30px var(--shadow-strong);
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
            color: var(--text-light);
            border: 1px solid var(--border-color);
        }
        .modal-content.small-modal { /* For confirmation modal specifically */
            max-width: 400px;
            padding: 20px;
        }

        .modal-content h2 {
            font-size: clamp(1.4rem, 4vw, 1.8rem);
            color: var(--accent-blue);
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* Option Management Modal Specifics */
        .option-management-modal {
            max-width: 500px;
        }
        .option-add-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .option-add-section input {
            flex-grow: 1;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-light);
            font-size: 1em;
            outline: none;
        }
        .option-add-section button {
            padding: 10px 15px;
            border-radius: var(--border-radius);
            border: none;
            background-color: var(--accent-green);
            color: var(--bg-dark);
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-weight: 600;
        }
        .option-list {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 300px; /* Scrollable list */
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        .option-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
        }
        .option-item:last-child {
            border-bottom: none;
        }
        .option-item:hover {
            background-color: #2a313c;
        }
        .option-item .option-text {
            flex-grow: 1;
            margin-right: 10px;
        }
        .option-item-actions {
            display: flex;
            gap: 8px;
        }
        .option-item-actions button {
            padding: 6px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            cursor: pointer;
            border: none;
            transition: background-color 0.2s ease;
            color: var(--bg-dark); /* Default button text color */
        }
        .option-item-actions .edit-option-btn {
            background-color: var(--edit-button-bg);
        }
        .option-item-actions .edit-option-btn:hover {
            background-color: #ff9800;
        }
        .option-item-actions .delete-option-btn {
            background-color: var(--delete-button-bg);
            color: var(--text-light);
        }
        .option-item-actions .delete-option-btn:hover {
            background-color: var(--delete-button-hover-bg);
        }
        .option-edit-input {
            flex-grow: 1;
            padding: 5px 10px;
            border-radius: var(--border-radius);
            border: 1px solid var(--accent-blue);
            background-color: var(--input-bg);
            color: var(--text-light);
            font-size: 0.9em;
            outline: none;
            margin-right: 10px;
        }
        .option-item-actions .save-option-btn {
            background-color: var(--accent-green);
        }
        .option-item-actions .cancel-option-btn {
            background-color: var(--button-bg-secondary);
            color: var(--text-light);
        }


        /* Full-screen History Styles */
        .history-screen-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh; /* Ensure it takes full viewport height */
            background-color: var(--bg-card); /* Same as app container */
            z-index: 1000; /* High z-index to cover everything */
            display: flex; /* Use flexbox for layout */
            flex-direction: column; /* Stack children vertically */
            color: var(--text-light);
        }

        .history-screen-header {
            padding: 24px 16px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-card);
            flex-shrink: 0; /* Don't allow header to shrink */
        }
        .history-screen-header h2 {
            font-size: clamp(1.6rem, 5vw, 2.5rem);
            color: var(--accent-blue);
            margin: 0;
        }

        .history-screen-content {
            flex-grow: 1; /* Allow content area to take remaining vertical space */
            overflow-y: auto; /* Scrollable content area */
            -webkit-overflow-scrolling: touch;
            padding: 20px 16px;
        }

        /* Table styles for history screen (Excel-like) */
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.9em;
            min-width: 600px; /* Ensure table is wide enough on smaller screens */
            box-shadow: 0 2px 10px rgba(0,0,0,0.3); /* Subtle table shadow */
            border-radius: var(--border-radius);
            overflow: hidden; /* Ensures rounded corners */
        }

        .history-table th,
        .history-table td {
            border: 1px solid var(--border-color); /* All cells have borders */
            padding: 10px 12px;
            text-align: left;
        }
        .history-table th.amount-header,
        .history-table td.amount-cell {
            text-align: right;
        }

        /* Styling for history table headings */
        .history-table-header {
            font-size: clamp(1rem, 3vw, 1.25rem); /* Bigger font size */
            color: var(--accent-blue); /* Different color */
            background-color: var(--table-header-bg);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky; /* Make headers sticky for scrolling */
            top: 0;
            z-index: 1; /* Ensure headers stay above content */
        }

        .history-table tr {
            background-color: var(--table-row-odd);
            transition: background-color 0.1s ease;
        }
        .history-table tr:nth-child(even) {
            background-color: var(--table-row-even); /* Darker for even rows */
        }
        .history-table tr:hover {
            background-color: #2a313c; /* Highlight row on hover */
        }

        /* Specific styles for overall history table rows */
        /* These should override generic row colors for combined history */
        .history-table tr.history-entry-freelancing {
            background-color: var(--freelancing-row-bg); /* Darker blue-grey for freelancing */
            color: var(--accent-blue); /* Distinct color for freelancing rows */
        }
        .history-table tr.history-entry-freelancing:nth-child(even) { /* Keep specific color for even rows */
            background-color: var(--freelancing-row-bg);
        }
        .history-table tr.history-entry-selling {
            background-color: var(--selling-row-bg); /* Darker purple-grey for selling */
            color: var(--accent-orange); /* Distinct color for selling rows */
        }
        .history-table tr.history-entry-selling:nth-child(even) { /* Keep specific color for even rows */
            background-color: var(--selling-row-bg);
        }
        .history-table tr.history-entry-freelancing:hover,
        .history-table tr.history-entry-selling:hover {
            background-color: #2a313c; /* Still highlight on hover */
        }

        /* Amount column specific text color */
        .amount-value-text {
            color: var(--accent-green);
            font-weight: 500;
        }


        .modal-close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 2em;
            color: var(--text-secondary);
            cursor: pointer;
            line-height: 1; /* Prevent extra spacing */
        }

        .modal-close-button:hover {
            color: var(--text-light);
        }

        /* Table container for overflow on small screens */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            flex-grow: 1; /* Allow table container to grow within content */
        }

        /* New styles for amount cell and action buttons */
        td.amount-cell {
            position: relative;
            text-align: right; /* Default alignment for currency */
            padding: 0; /* Remove padding from td to let inner elements handle it */
            min-width: 100px; /* Ensure enough width for amount and buttons */
        }

        td.amount-cell .amount-display {
            display: block; /* Ensures it takes up space */
            padding: 12px 15px; /* Restore original padding for amount */
            transition: opacity 0.2s ease-in-out;
        }
        td.amount-cell .amount-display.hidden {
            opacity: 0;
            pointer-events: none;
        }

        td.amount-cell .history-action-buttons {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center; /* Center buttons horizontally */
            align-items: center; /* Center buttons vertically */
            gap: 8px; /* Space between buttons */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            padding: 5px; /* Small padding inside the cell for buttons */
            box-sizing: border-box; /* Include padding in width/height */
        }
        
        td.amount-cell .history-action-buttons.visible {
            opacity: 1;
            pointer-events: auto;
        }

        /* When in editing mode, the input and buttons are direct children, so remove absolute positioning for buttons */
        td.amount-cell .history-edit-input {
            width: 100%;
            text-align: center;
            padding: 5px 8px;
            box-sizing: border-box;
        }
        td.amount-cell .history-action-buttons-edit { /* New class for edit mode buttons container */
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 5px; /* Space between input and buttons */
            padding: 0 5px; /* Adjust padding for buttons */
        }
        td.amount-cell .history-action-buttons-edit button {
            padding: 6px 10px;
            border-radius: var(--border-radius);
            font-size: 0.85em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border: none;
            flex-shrink: 0;
            color: var(--bg-dark); /* Default button text color */
        }


        .history-edit-input {
            width: 80px; /* Small width for the input */
            padding: 5px 8px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-light);
            font-size: 0.85em;
            outline: none;
            text-align: right;
            -moz-appearance: textfield; /* Hide arrows in Firefox */
        }
        .history-edit-input::-webkit-outer-spin-button,
        .history-edit-input::-webkit-inner-spin-button {
            -webkit-appearance: none; /* Hide arrows in Chrome/Safari */
            margin: 0;
        }


        /* Action button specific styles (retained) */
        .history-action-buttons .edit-btn,
        .history-action-buttons-edit .save-btn {
            background-color: var(--edit-button-bg); /* Use accent orange for edit */
            color: var(--bg-dark);
        }
        .history-action-buttons .edit-btn:hover,
        .history-action-buttons-edit .save-btn:hover {
            background-color: #ff9800; /* Lighter orange on hover */
        }

        .history-action-buttons .delete-btn {
            background-color: var(--delete-button-bg); /* Red for delete */
            color: var(--text-light);
        }
        .history-action-buttons .delete-btn:hover {
            background-color: var(--delete-button-hover-bg);
        }
        
        .history-action-buttons-edit .cancel-edit-btn,
        .modal-content .cancel-btn { /* For confirmation modal */
            background-color: var(--button-bg-secondary);
            color: var(--text-light);
        }
        .history-action-buttons-edit .cancel-edit-btn:hover,
        .modal-content .cancel-btn:hover {
            background-color: #5a626e;
        }
        /* Specific delete button style for confirmation modal */
        .modal-content .delete-btn {
            background-color: var(--delete-button-bg);
            color: var(--text-light);
        }
        .modal-content .delete-btn:hover {
            background-color: var(--delete-button-hover-bg);
        }

        /* Mini-History Section Styles */
        .mini-history-section {
            background-color: var(--bg-dark);
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 12px var(--shadow-light);
            display: flex; /* Use flex to stack header and table */
            flex-direction: column;
            gap: 10px; /* Space between header and table */
        }

        .mini-history-section h3 {
            font-size: clamp(1rem, 3vw, 1.3rem);
            color: var(--text-light);
            margin-bottom: 0; /* Remove default margin */
            padding-bottom: 5px;
            border-bottom: 1px solid var(--border-color);
            text-align: center;
        }

        .mini-history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
        }

        .mini-history-table th,
        .mini-history-table td {
            border: 1px solid var(--border-color);
            padding: 8px 10px;
            text-align: left;
        }
        .mini-history-table th.amount-header,
        .mini-history-table td.amount-cell {
            text-align: right;
        }

        .mini-history-table th {
            background-color: var(--table-header-bg);
            color: var(--accent-blue); /* Consistent header color */
            font-weight: 600;
        }

        .mini-history-table tr:nth-child(odd) {
            background-color: var(--table-row-odd);
        }

        .mini-history-table tr:nth-child(even) {
            background-color: var(--table-row-even);
        }

        .mini-history-table td.amount-cell {
            color: var(--accent-green); /* Consistent amount color */
            font-weight: 500;
        }
        .mini-table-container {
            overflow-x: auto; /* Allow horizontal scrolling for mini-tables if content is too wide */
            -webkit-overflow-scrolling: touch;
        }


        /* Responsive adjustments */
        @media (max-width: 479px) {
            .countdown-item {
                flex: 1 1 calc(50% - 12px); /* 2 items per row on small screens */
            }
            .input-card {
                flex-direction: column; /* Stack input and add button on small screens */
                align-items: stretch;
            }
            .input-row {
                flex-direction: column; /* Stack amount and date inputs */
                align-items: stretch;
            }
            .input-wrapper {
                width: 100%; /* Ensure input wrapper takes full width */
                min-width: unset;
            }
            .input-wrapper.date-input {
                flex: 0 1 auto;
            }
            .input-card input[type="number"],
            .input-card input[type="date"],
            .input-card .dropdown-select,
            .input-card .note-textarea {
                width: 100%;
            }
            .input-card button {
                width: 100%;
                margin-top: 5px; /* Add some space between input and buttons */
            }
            /* FABs positioning on small screens */
            .fab-button {
                bottom: 75px; /* Adjusted to be above the tab bar + 10px margin */
                right: 15px; /* Adjust right for smaller screens */
                width: 50px; /* Slightly smaller FABs */
                height: 50px;
            }
            .fab-button svg {
                width: 24px; /* Adjust icon size */
                height: 24px;
            }

            .home-menu-overlay {
                width: 80%; /* Wider sidebar on small screens */
            }

            .modal-content {
                padding: 20px;
            }
            .modal-content h2 {
                margin-bottom: 15px;
            }
            /* History Screen Adjustments for Small Screens */
            .history-screen-header {
                padding: 15px 10px;
            }
            .history-screen-header h2 {
                font-size: 1.5rem;
            }
            .history-screen-content {
                padding: 15px 10px;
            }
            .history-table th, .history-table td {
                padding: 8px 10px;
                font-size: 0.8em;
            }
            .history-edit-input {
                width: 100%; /* Fill width in mobile edit mode */
                font-size: 0.9em;
            }
            td.amount-cell .history-action-buttons-edit button {
                padding: 4px 6px;
                font-size: 0.75em;
            }

            .option-management-modal {
                max-width: 95%;
            }
            .option-add-section {
                flex-direction: column;
            }
        }

        @media (min-width: 480px) {
            body {
                align-items: center; /* Center vertically on larger screens */
                padding: 20px;
            }
            .app-container {
                min-height: 85vh; /* Don't take full height on larger screens */
                max-width: 700px; /* Constrain width for desktop for better aesthetics */
                border-radius: var(--border-radius);
            }
            .main-content {
                padding: 30px 24px;
                padding-bottom: 150px; /* Added padding to ensure space for FABs and menu */
            }
            .input-card {
                flex-direction: column; /* Stack input row and add button */
                align-items: stretch;
                gap: 15px;
            }
            .input-row {
                flex-wrap: nowrap; /* Prevent wrapping on larger screens */
            }
            .input-wrapper,
            .input-field-group {
                flex-grow: 1; /* Allow input wrapper to grow */
                width: auto;
            }
            .input-card input[type="number"],
            .input-card input[type="date"],
            .input-card .dropdown-select,
            .input-card .note-textarea {
                flex-grow: 1;
                width: auto;
            }
            .input-card button {
                flex-shrink: 0;
                width: auto;
            }
            /* FABs positioning on larger screens */
            .fab-button {
                bottom: 75px; /* Adjusted to be above the tab bar + 10px margin */
                right: 20px; /* Consistent spacing */
                width: 56px; /* Default FAB size */
                height: 56px;
            }
            .fab-button svg {
                width: 28px;
                height: 28px;
            }

            .home-menu-overlay {
                width: var(--menu-sidebar-width); /* Consistent width */
            }
            .modal-content {
                max-width: 600px; /* Wider modal on larger screens */
            }
            /* History Screen Adjustments for Large Screens */
            .history-screen-header {
                padding: 24px 20px;
            }
            .history-screen-header h2 {
                font-size: 2.2rem;
            }
            .history-screen-content {
                padding: 20px;
            }
            .history-table th, .history-table td {
                padding: 12px 15px;
                font-size: 0.95em;
            }
        }