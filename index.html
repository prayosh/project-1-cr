<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 10 Cr</title>
    <!-- Inlined CSS from index.css -->
    <style>
        /* Basic Reset */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-dark: #0d1117; /* Very dark background */
            --bg-card: #161b22; /* Slightly lighter for cards */
            --text-light: #c9d1d9; /* Light grey text */
            --text-secondary: #8b949e; /* Muted text */
            --accent-blue: #58a6ff; /* Primary accent color */
            --accent-green: #3fb950; /* Success/add button */
            --accent-orange: #f0883e; /* Warning/countdown */
            --border-color: #30363d;
            --border-radius: 8px;
            --shadow-light: rgba(0, 0, 0, 0.2);
            --shadow-strong: rgba(0, 0, 0, 0.4);
            --countdown-bg: #1f2a38; /* Background for countdown items */
            --countdown-border: #445566; /* Border for countdown items */
            --input-bg: #1a202c; /* Distinct dark background for input fields */
            --input-icon-color: var(--text-secondary); /* Default icon color */
            --input-icon-focus-color: var(--accent-blue); /* Icon color on focus */
            --button-bg-secondary: #4a515c; /* Secondary button background */
            --fab-bg: #58a6ff; /* FAB background, e.g., accent blue */
            --fab-icon-color: var(--bg-dark); /* FAB icon color, dark for contrast */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top on larger screens */
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        #root {
            background-color: var(--bg-dark); /* Root itself can be bg-dark to seamlessly fit full screen */
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative; /* For sticky footer */
        }

        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            width: 100%;
            max-width: 800px; /* Optional: Constrain overall width on very large screens for better readability */
            margin: 0 auto; /* Center the app container if max-width is set */
            background-color: var(--bg-card); /* Main app content background */
            box-shadow: 0 0 20px var(--shadow-strong);
        }

        .app-header {
            padding: 24px 16px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-card);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .app-title {
            font-size: clamp(1.8rem, 5vw, 2.8rem); /* Responsive font size */
            margin-bottom: 8px;
            color: var(--accent-blue);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .current-date {
            font-size: clamp(0.85rem, 2.5vw, 1rem);
            color: var(--text-secondary);
        }

        .main-content {
            flex-grow: 1;
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            overflow-y: auto; /* Enable scrolling for content if needed */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        .tab-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
            height: 100%;
            position: relative; /* Needed for absolute positioning of FABs */
        }

        .progress-section {
            background-color: var(--bg-dark);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .progress-section h3 {
            margin-bottom: 15px;
            color: var(--text-light); /* Changed to light text for better contrast */
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            font-weight: 600;
        }

        .progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: 5px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #64b5f6, var(--accent-blue)); /* Gradient blue */
            border-radius: 5px;
            width: 0%;
            transition: width 0.7s ease-out; /* Slower, smoother transition */
            box-shadow: 0 0 8px rgba(88, 166, 255, 0.5); /* Subtle glow */
        }

        .progress-text {
            font-size: clamp(0.9rem, 2.5vw, 1.05rem);
            color: var(--text-secondary);
            text-align: center;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 4px;
        }

        .progress-text .percentage-value {
            color: var(--accent-blue);
            font-weight: 500;
        }

        .input-card {
            background-color: var(--bg-dark);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px var(--shadow-light);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
            /* Removed position: relative; as FABs are now relative to .tab-content */
        }

        .input-card label.sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            border: 1px solid var(--border-color); /* Border now on wrapper */
            border-radius: var(--border-radius);
            background-color: var(--input-bg);
            transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease; /* Animation on focus */
        }

        .input-wrapper:focus-within {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.4), 0 0 10px rgba(88, 166, 255, 0.2);
            transform: translateY(-1px); /* Subtle lift on focus */
        }

        .input-wrapper .currency-icon {
            position: absolute;
            left: 15px; /* Adjust as needed */
            color: var(--input-icon-color);
            font-size: 1.15em; /* Slightly larger */
            transition: color 0.2s ease;
            pointer-events: none; /* Allows clicks to pass through to the input */
            line-height: 1; /* Align vertically */
        }

        .input-wrapper:focus-within .currency-icon {
            color: var(--input-icon-focus-color);
        }

        .input-card input[type="number"] {
            flex-grow: 1;
            padding: 12px 15px 12px 40px; /* Adjust left padding for icon */
            border-radius: var(--border-radius);
            border: none; /* No border on the input itself */
            background: transparent; /* Transparent background to show wrapper bg */
            color: var(--text-light);
            font-size: 1em;
            outline: none; /* No default outline */
        }

        .input-card input[type="number"]::placeholder {
            color: var(--text-secondary);
        }

        .input-card button {
            padding: 12px 20px;
            border-radius: var(--border-radius); /* Consistent border-radius */
            border: none;
            background-color: var(--accent-green);
            color: var(--bg-dark); /* Dark text for contrast on green button */
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease; /* Include box-shadow in transition */
            box-shadow: 0 4px 12px rgba(63, 185, 80, 0.1); /* Subtle initial shadow */
        }

        .input-card button:hover {
            background-color: #4ac25d;
            transform: translateY(-2px); /* Slightly more pronounced lift */
            box-shadow: 0 6px 16px rgba(63, 185, 80, 0.3); /* Stronger green shadow on hover */
        }

        .input-card button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(63, 185, 80, 0.2); /* Reduced shadow on active */
        }

        /* --- Floating Action Buttons (FABs) --- */
        .fab-button {
            position: absolute;
            bottom: 75px; /* Distance from bottom - Adjusted */
            right: 20px; /* Distance from right */
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--fab-bg);
            color: var(--fab-icon-color);
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 12px var(--shadow-strong);
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            z-index: 15; /* Above other content, below modals */
        }

        .fab-button svg {
            width: 28px;
            height: 28px;
            color: var(--fab-icon-color); /* Icon color */
            transition: color 0.2s ease;
        }

        .fab-button:hover {
            background-color: #64b5f6; /* Slightly lighter blue on hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 16px var(--shadow-strong);
        }

        .fab-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px var(--shadow-strong);
        }

        .fab-button:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 3px;
        }

        /* Specific FAB positioning adjustments */
        .history-fab {
            /* Uses default FAB styles, no specific overrides needed here for position */
        }

        .menu-fab {
            /* Uses default FAB styles, no specific overrides needed here for position */
            /* id="home-menu-fab" for aria-labelledby */
        }

        /* --- Home Menu Overlay --- */
        .home-menu-overlay {
            position: absolute;
            bottom: 140px; /* Position above the menu FAB - Adjusted */
            right: 20px;
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px var(--shadow-strong);
            padding: 10px 0;
            z-index: 20; /* Above FABs, below modals */
            display: flex;
            flex-direction: column;
            min-width: 180px;
        }

        .home-menu-overlay button {
            background: none;
            border: none;
            color: var(--text-light);
            padding: 10px 20px;
            text-align: left;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease;
            width: 100%;
            white-space: nowrap; /* Prevent text wrap */
        }

        .home-menu-overlay button:hover {
            background-color: #2a313c;
            color: var(--accent-blue);
        }

        .home-menu-overlay button:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: -2px; /* Inset outline */
        }


        .countdown-card {
            background-color: var(--bg-dark);
            padding: 25px 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px var(--shadow-light);
            border: 1px solid var(--border-color);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .countdown-card h2 {
            font-size: clamp(1.2rem, 3.5vw, 1.6rem);
            color: var(--text-light);
            margin-bottom: 15px; /* Increased margin for better separation */
        }

        /* Calendar-type countdown styling */
        .countdown-grid {
            display: flex;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
            justify-content: center;
            gap: 12px; /* Space between countdown items */
            width: 100%; /* Ensure it uses available width */
        }

        .countdown-item {
            background-color: var(--countdown-bg);
            border: 1px solid var(--countdown-border);
            border-radius: var(--border-radius);
            padding: 10px 15px;
            min-width: 80px; /* Minimum width for each item */
            flex: 1 1 calc(25% - 12px); /* Distribute items, 4 per row, adjust for gap */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px var(--shadow-light);
        }

        .countdown-item:last-child {
            margin-right: 0;
        }

        /* Keyframe animation for countdown digits */
        @keyframes digit-pop {
            0% {
                transform: scale(0.8);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .countdown-value {
            font-family: 'Roboto Mono', monospace;
            font-size: clamp(1.6rem, 5vw, 2.5rem);
            font-weight: 700;
            color: var(--accent-orange);
            line-height: 1; /* Adjust line height to prevent extra space */
            margin-bottom: 5px;
            /* Animation for digit change */
            animation: digit-pop 0.3s ease-out; 
        }

        /* Distinct color for Days countdown value */
        .countdown-value.days-value-color {
            color: var(--accent-green); /* Or any other distinct color */
        }


        .countdown-label {
            font-size: clamp(0.7rem, 2.2vw, 0.9rem);
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .countdown-timer { /* Fallback for "Goal date passed!" */
            font-family: 'Roboto Mono', monospace;
            font-size: clamp(1.4rem, 4.5vw, 2.2rem);
            font-weight: 700;
            color: var(--accent-orange);
            letter-spacing: -0.5px;
        }

        .tab-bar {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid var(--border-color);
            background-color: var(--bg-card);
            padding: 10px 0;
            position: sticky;
            bottom: 0;
            width: 100%;
            z-index: 10;
        }

        .tab-button {
            flex: 1;
            padding: 12px 8px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: clamp(0.9rem, 2.8vw, 1.05rem);
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-bottom 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-align: center;
        }

        .tab-button svg {
            height: 24px;
            width: 24px;
            color: var(--text-secondary);
        }

        .tab-button:hover:not(.active) {
            background-color: #2a313c;
            color: var(--text-light);
        }

        .tab-button.active {
            color: var(--accent-blue);
            background-color: #2a313c;
            border-bottom: 3px solid var(--accent-blue);
            font-weight: 600;
        }

        .tab-button.active svg {
            color: var(--accent-blue);
        }

        /* Accessibility: Focus styles */
        .tab-button:focus,
        .input-card button:focus,
        .modal-close-button:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }
        /* Explicitly define focus for the input wrapper */
        .input-wrapper:focus-within {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }


        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px); /* Subtle blur effect */
        }

        .modal-content {
            background-color: var(--bg-card);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 30px var(--shadow-strong);
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
            color: var(--text-light);
            border: 1px solid var(--border-color);
        }

        .modal-content h2 {
            font-size: clamp(1.4rem, 4vw, 1.8rem);
            color: var(--accent-blue);
            margin-bottom: 20px;
            text-align: center;
        }

        .modal-content table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.95em;
            min-width: 300px; /* Ensure table is not too narrow */
        }

        .modal-content th,
        .modal-content td {
            border: 1px solid var(--border-color);
            padding: 12px 15px;
            text-align: left;
        }

        .modal-content th {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal-content tr:nth-child(even) {
            background-color: #1a202a; /* Slightly different background for even rows */
        }

        .modal-content tr:hover {
            background-color: #2a313c; /* Highlight row on hover */
        }

        .modal-close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 2em;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.2s ease;
            line-height: 1; /* Prevent extra spacing */
        }

        .modal-close-button:hover {
            color: var(--text-light);
        }

        /* Table container for overflow on small screens */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }


        /* Responsive adjustments */
        @media (max-width: 479px) {
            .countdown-item {
                flex: 1 1 calc(50% - 12px); /* 2 items per row on small screens */
            }
            .input-card {
                flex-direction: column; /* Stack input and add button on small screens */
                align-items: stretch;
            }
            .input-wrapper {
                width: 100%; /* Ensure input wrapper takes full width */
            }
            .input-card input[type="number"] {
                width: 100%;
            }
            .input-card button {
                width: 100%;
                margin-top: 5px; /* Add some space between input and buttons */
            }
            /* FABs positioning on small screens */
            .fab-button {
                bottom: 75px; /* Adjusted to be above the tab bar + 10px margin */
                right: 15px; /* Adjust right for smaller screens */
                width: 50px; /* Slightly smaller FABs */
                height: 50px;
            }
            .fab-button svg {
                width: 24px; /* Adjust icon size */
                height: 24px;
            }

            .home-menu-overlay {
                bottom: 140px; /* Position above smaller FAB + margin */
                right: 15px;
            }

            .modal-content {
                padding: 20px;
            }
            .modal-content h2 {
                margin-bottom: 15px;
            }
            .modal-content th, .modal-content td {
                padding: 8px 10px;
                font-size: 0.85em;
            }
        }

        @media (min-width: 480px) {
            body {
                align-items: center; /* Center vertically on larger screens */
                padding: 20px;
            }
            .app-container {
                min-height: 85vh; /* Don't take full height on larger screens */
                max-width: 700px; /* Constrain width for desktop for better aesthetics */
                border-radius: var(--border-radius);
            }
            .main-content {
                padding: 30px 24px;
            }
            .input-card {
                flex-direction: row;
                align-items: center; /* Align items vertically in the row */
                gap: 10px; /* Reduce gap to fit FABs better if placed inside, but they're not anymore */
            }
            .input-wrapper {
                flex-grow: 1; /* Allow input wrapper to grow */
                width: auto;
            }
            .input-card input[type="number"] {
                flex-grow: 1;
                width: auto;
            }
            .input-card button {
                flex-shrink: 0;
                width: auto;
            }
            /* FABs positioning on larger screens */
            .fab-button {
                bottom: 75px; /* Adjusted to be above the tab bar + 10px margin */
                right: 20px; /* Consistent spacing */
                width: 56px; /* Default FAB size */
                height: 56px;
            }
            .fab-button svg {
                width: 28px;
                height: 28px;
            }

            .home-menu-overlay {
                bottom: 140px; /* Adjusted to be above FAB + margin */
                right: 20px;
            }
            .modal-content {
                max-width: 600px; /* Wider modal on larger screens */
            }
        }
    </style>
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel Standalone for in-browser JSX compilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Using `React` and `ReactDOM` from the global scope due to CDN imports
        const { useState, useEffect, useRef, useMemo, useCallback } = React;

        // Helper function to format currency
        const formatCurrency = (amount) => {
            return `₹${amount.toLocaleString('en-IN', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
        };

        // Helper function to format date for history display
        const formatEntryDate = (isoString) => {
            const date = new Date(isoString);
            return date.toLocaleString('en-IN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
        };

        // Helper function to calculate time remaining
        const calculateTimeRemaining = (targetDate) => {
            const now = new Date();
            const difference = targetDate.getTime() - now.getTime();

            if (difference < 0) {
                return { days: '00', hours: '00', minutes: '00', seconds: '00', passed: true };
            }

            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);

            return {
                days: String(days).padStart(2, '0'),
                hours: String(hours).padStart(2, '0'),
                minutes: String(minutes).padStart(2, '0'),
                seconds: String(seconds).padStart(2, '0'),
                passed: false
            };
        };

        const HistoryModal = ({ title, history, onClose }) => {
            return (
                <div className="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
                    <div className="modal-content">
                        <h2 id="modal-title">{title} History</h2>
                        {history.length === 0 ? (
                            <p>No entries yet.</p>
                        ) : (
                            <div className="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Amount</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {history.map((entry, index) => (
                                            <tr key={index}>
                                                <td>{formatCurrency(entry.amount)}</td>
                                                <td>{formatEntryDate(entry.date)}</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}
                        <button className="modal-close-button" onClick={onClose} aria-label="Close history">
                            &times;
                        </button>
                    </div>
                </div>
            );
        };

        const Project10CrApp = () => {
            const [activeTab, setActiveTab] = useState('home');
            
            const [freelancingHistory, setFreelancingHistory] = useState(() => {
                const stored = localStorage.getItem('freelancingHistory');
                return stored ? JSON.parse(stored) : [];
            });
            const [sellingHistory, setSellingHistory] = useState(() => {
                const stored = localStorage.getItem('sellingHistory');
                return stored ? JSON.parse(stored) : [];
            });

            const freelancingIncome = useMemo(() => 
                freelancingHistory.reduce((sum, entry) => sum + entry.amount, 0), 
            [freelancingHistory]);
            
            const sellingIncome = useMemo(() => 
                sellingHistory.reduce((sum, entry) => sum + entry.amount, 0), 
            [sellingHistory]);

            const [freelancingInput, setFreelancingInput] = useState('');
            const [sellingInput, setSellingInput] = useState('');
            const [currentDate, setCurrentDate] = useState('');
            const [countdown, setCountdown] = useState({ days: '00', hours: '00', minutes: '00', seconds: '00', passed: false });

            const [showFreelancingHistory, setShowFreelancingHistory] = useState(false);
            const [showSellingHistory, setShowSellingHistory] = useState(false);
            const [showHomeMenu, setShowHomeMenu] = useState(false);
            const [showOverallHistory, setShowOverallHistory] = useState(false);

            const targetDate = useRef(new Date('2026-12-31T23:59:59'));

            useEffect(() => {
                const today = new Date();
                setCurrentDate(today.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }));

                const timer = setInterval(() => {
                    setCountdown(calculateTimeRemaining(targetDate.current));
                }, 1000);

                return () => clearInterval(timer);
            }, []);

            useEffect(() => {
                localStorage.setItem('freelancingHistory', JSON.stringify(freelancingHistory));
            }, [freelancingHistory]);

            useEffect(() => {
                localStorage.setItem('sellingHistory', JSON.stringify(sellingHistory));
            }, [sellingHistory]);

            const handleAddIncome = useCallback((type) => {
                const inputAmount = type === 'freelancing' ? freelancingInput : sellingInput;
                const amount = parseFloat(inputAmount);

                if (isNaN(amount) || amount <= 0) {
                    alert('Please enter a valid positive number for income.');
                    return;
                }

                const confirmationMessage = `Are you sure you want to add ${formatCurrency(amount)} to your ${type} income?`;
                if (!window.confirm(confirmationMessage)) {
                    return;
                }

                const newEntry = { amount, date: new Date().toISOString() };

                if (type === 'freelancing') {
                    setFreelancingHistory(prev => [...prev, newEntry]);
                    setFreelancingInput('');
                } else {
                    setSellingHistory(prev => [...prev, newEntry]);
                    setSellingInput('');
                }
            }, [freelancingInput, sellingInput]);

            const renderProgressBar = (current, target, label) => {
                const percentage = Math.min(100, (current / target) * 100);
                const formattedCurrent = formatCurrency(current);
                const formattedTarget = formatCurrency(target);

                return (
                    <div className="progress-section">
                        <h3 id={`${label}-progress-label`}>{label} Goal ({formattedTarget})</h3>
                        <div className="progress-bar-container" role="progressbar"
                            aria-valuenow={percentage} aria-valuemin={0} aria-valuemax={100}
                            aria-labelledby={`${label}-progress-label`}>
                            <div className="progress-bar-fill" style={{ width: `${percentage}%` }}></div>
                        </div>
                        <p className="progress-text">
                            Current: {formattedCurrent} / Target: {formattedTarget} <span className="percentage-value">({percentage.toFixed(2)}%)</span>
                        </p>
                    </div>
                );
            };

            return (
                <div className="app-container">
                    <header className="app-header">
                        <h1 className="app-title">Project 10 Cr</h1>
                        <p className="current-date">{currentDate}</p>
                    </header>

                    <main className="main-content">
                        {activeTab === 'home' && (
                            <div className="tab-content" role="tabpanel" id="home-panel" aria-labelledby="home-tab">
                                {renderProgressBar(freelancingIncome + sellingIncome, 100000000, 'Overall')}
                                <div className="countdown-card" aria-live="polite">
                                    <h2>Goal Deadline</h2>
                                    {countdown.passed ? (
                                        <p className="countdown-timer">Goal date passed!</p>
                                    ) : (
                                        <div className="countdown-grid">
                                            <div className="countdown-item">
                                                <span key={countdown.days} className="countdown-value days-value-color">{countdown.days}</span>
                                                <span className="countdown-label">Days</span>
                                            </div>
                                            <div className="countdown-item">
                                                <span key={countdown.hours} className="countdown-value">{countdown.hours}</span>
                                                <span className="countdown-label">Hours</span>
                                            </div>
                                            <div className="countdown-item">
                                                <span key={countdown.minutes} className="countdown-value">{countdown.minutes}</span>
                                                <span className="countdown-label">Minutes</span>
                                            </div>
                                            <div className="countdown-item">
                                                <span key={countdown.seconds} className="countdown-value">{countdown.seconds}</span>
                                                <span className="countdown-label">Seconds</span>
                                            </div>
                                        </div>
                                    )}
                                </div>
                                <button className="fab-button menu-fab" onClick={() => setShowHomeMenu(prev => !prev)} aria-label="Open Home Menu">
                                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                                        <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                                    </svg>
                                </button>
                                {showHomeMenu && (
                                    <div className="home-menu-overlay" role="menu" aria-labelledby="home-menu-fab">
                                        <button
                                            role="menuitem"
                                            onClick={() => { setShowOverallHistory(true); setShowHomeMenu(false); }}
                                            aria-label="Show Overall Income History"
                                        >
                                            Overall Income History
                                        </button>
                                    </div>
                                )}
                                {showOverallHistory && (
                                    <HistoryModal
                                        title="Overall Combined"
                                        history={[...freelancingHistory, ...sellingHistory].sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())}
                                        onClose={() => setShowOverallHistory(false)}
                                    />
                                )}
                            </div>
                        )}

                        {activeTab === 'freelancing' && (
                            <div className="tab-content" role="tabpanel" id="freelancing-panel" aria-labelledby="freelancing-tab">
                                {renderProgressBar(freelancingIncome, 50000000, 'Freelancing')}
                                <div className="input-card">
                                    <label htmlFor="freelancing-income-input" className="sr-only">Enter income amount for freelancing</label>
                                    <div className="input-wrapper">
                                        <span className="currency-icon" aria-hidden="true">₹</span>
                                        <input
                                            id="freelancing-income-input"
                                            type="number"
                                            value={freelancingInput}
                                            onChange={(e) => setFreelancingInput(e.target.value)}
                                            placeholder="Enter income amount"
                                            min="0"
                                        />
                                    </div>
                                    <button onClick={() => handleAddIncome('freelancing')}>Add Income</button>
                                </div>
                                <button className="fab-button history-fab" onClick={() => setShowFreelancingHistory(true)} aria-label="Show Freelancing Income History">
                                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                                        <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2z"/>
                                    </svg>
                                </button>
                                {showFreelancingHistory && (
                                    <HistoryModal
                                        title="Freelancing"
                                        history={freelancingHistory}
                                        onClose={() => setShowFreelancingHistory(false)}
                                    />
                                )}
                            </div>
                        )}

                        {activeTab === 'selling' && (
                            <div className="tab-content" role="tabpanel" id="selling-panel" aria-labelledby="selling-tab">
                                {renderProgressBar(sellingIncome, 50000000, 'Selling')}
                                <div className="input-card">
                                    <label htmlFor="selling-income-input" className="sr-only">Enter income amount for selling</label>
                                    <div className="input-wrapper">
                                        <span className="currency-icon" aria-hidden="true">₹</span>
                                        <input
                                            id="selling-income-input"
                                            type="number"
                                            value={sellingInput}
                                            onChange={(e) => setSellingInput(e.target.value)}
                                            placeholder="Enter income amount"
                                            min="0"
                                        />
                                    </div>
                                    <button onClick={() => handleAddIncome('selling')}>Add Income</button>
                                </div>
                                <button className="fab-button history-fab" onClick={() => setShowSellingHistory(true)} aria-label="Show Selling Income History">
                                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                                        <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2z"/>
                                    </svg>
                                </button>
                                {showSellingHistory && (
                                    <HistoryModal
                                        title="Selling"
                                        history={sellingHistory}
                                        onClose={() => setShowSellingHistory(false)}
                                    />
                                )}
                            </div>
                        )}
                    </main>

                    <footer className="tab-bar" role="tablist">
                        <button
                            className={`tab-button ${activeTab === 'freelancing' ? 'active' : ''}`}
                            onClick={() => setActiveTab('freelancing')}
                            role="tab"
                            aria-controls="freelancing-panel"
                            aria-selected={activeTab === 'freelancing'}
                            id="freelancing-tab"
                        >
                            Freelancing
                        </button>
                        <button
                            className={`tab-button ${activeTab === 'home' ? 'active' : ''}`}
                            onClick={() => setActiveTab('home')}
                            role="tab"
                            aria-controls="home-panel"
                            aria-selected={activeTab === 'home'}
                            id="home-tab"
                            aria-label="Home"
                        >
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                            </svg>
                        </button>
                        <button
                            className={`tab-button ${activeTab === 'selling' ? 'active' : ''}`}
                            onClick={() => setActiveTab('selling')}
                            role="tab"
                            aria-controls="selling-panel"
                            aria-selected={activeTab === 'selling'}
                            id="selling-tab"
                        >
                            Selling
                        </button>
                    </footer>
                </div>
            );
        };

        const container = document.getElementById('root');
        if (container) {
            ReactDOM.render(<Project10CrApp />, container);
        }
    </script>
</body>
</html>